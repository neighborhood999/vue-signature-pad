(function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b(require("signature_pad"),require("merge-images")):"function"==typeof define&&define.amd?define(["signature_pad","merge-images"],b):(a=a||self,a["vue-signature-pad"]=b(a.SignaturePad,a.mergeImages))})(this,function(a,b){'use strict';function c(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function d(a){for(var b=1;b<arguments.length;b++){var d=null==arguments[b]?{}:arguments[b],e=Object.keys(d);"function"==typeof Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(d).filter(function(a){return Object.getOwnPropertyDescriptor(d,a).enumerable}))),e.forEach(function(b){c(a,b,d[b])})}return a}function e(a){return f(a)||g(a)||h()}function f(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}}function g(a){if(Symbol.iterator in Object(a)||"[object Arguments]"===Object.prototype.toString.call(a))return Array.from(a)}function h(){throw new TypeError("Invalid attempt to spread non-iterable instance")}a=a&&a.hasOwnProperty("default")?a["default"]:a,b=b&&b.hasOwnProperty("default")?b["default"]:b;var i=["image/png","image/jpeg","image/svg+xml"],j=function(a){return i.includes(a)},k={dotSize:3/2,minWidth:.5,maxWidth:2.5,throttle:16,minDistance:5,backgroundColor:"rgba(0,0,0,0)",penColor:"black",velocityFilterWeight:.7,onBegin:function(){},onEnd:function(){}},l=function(a){return JSON.parse(JSON.stringify(a))},m={src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=",x:0,y:0},n={name:"VueSignaturePad",props:{width:{type:String,default:"100%"},height:{type:String,default:"100%"},customStyle:{type:Object},saveType:{type:String,default:"image/png"},options:{type:Object,default:function(){return{}}},images:{type:Array,default:function(){return[]}}},data:function(){return{signaturePad:{},cacheImages:[],signatureData:m,onResizeHandler:null}},mounted:function(){var b=this.options,c=this.$refs.signaturePadCanvas,e=new a(c,d({},k,b));this.signaturePad=e,this.onResizeHandler=this.resizeCanvas.bind(this),window.addEventListener("resize",this.onResizeHandler,!1),this.resizeCanvas()},beforeDestroy:function(){this.onResizeHandler&&window.removeEventListener("resize",this.onResizeHandler,!1)},methods:{resizeCanvas:function(){var a=Math.max,b=this.$refs.signaturePadCanvas,c=this.signaturePad.toData(),d=a(window.devicePixelRatio||1,1);b.width=b.offsetWidth*d,b.height=b.offsetHeight*d,b.getContext("2d").scale(d,d),this.signaturePad.clear(),this.signatureData=m,this.signaturePad.fromData(c)},saveSignature:function(){var a=this.signaturePad,b=this.saveType,c={isEmpty:!1,data:void 0};if(!j(b))throw new Error("Image type is incorrect!");return a.isEmpty()?d({},c,{isEmpty:!0}):(this.signatureData=a.toDataURL(b),d({},c,{data:this.signatureData}))},undoSignature:function(){var a=this.signaturePad,b=a.toData();if(b)return a.fromData(b.slice(0,-1))},changePenColor:function(a){this.signaturePad.penColor=a},mergeImageAndSignature:function(a){return this.signatureData=a,b([].concat(e(this.images),e(this.cacheImages),[this.signatureData]))},addImages:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];return this.cacheImages=[].concat(e(this.cacheImages),e(a)),b([].concat(e(this.images),e(this.cacheImages),[this.signatureData]))},fromDataURL:function(a){return this.signaturePad.fromDataURL(a)},lockSignaturePad:function(){return this.signaturePad.off()},openSignaturePad:function(){return this.signaturePad.on()},isEmpty:function(){return this.signaturePad.isEmpty()},getPropImagesAndCacheImages:function(){return this.propsImagesAndCustomImages},clearCacheImages:function(){return this.cacheImages=[],this.cacheImages},clearSignature:function(){return this.signaturePad.clear()}},computed:{propsImagesAndCustomImages:function(){var a=l(this.images),b=l(this.cacheImages);return[].concat(e(a),e(b))}},render:function(a){var b=this.width,c=this.height,e=this.customStyle;return a("div",{style:d({width:b,height:c},e)},[a("canvas",{style:{width:"100%",height:"100%"},ref:"signaturePadCanvas"})])}};return n.install=function(a){return a.component(n.name,n)},"undefined"!=typeof window&&window.Vue&&window.Vue.use(n),n});
